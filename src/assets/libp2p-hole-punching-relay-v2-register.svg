<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="998.4px" preserveAspectRatio="none" style="width:1294px;height:998px;" version="1.1" viewBox="0 0 1294 998" width="1294.6286px" zoomAndPan="magnify"><defs><filter height="300%" id="f1fz4tav0apkh1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="7.314285714285714"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="14.628571428571428" dy="14.628571428571428" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1fz4tav0apkh1)" height="558.8" style="stroke: #000000; stroke-width: 7.314285714285714;" width="1206.8571" x="47.5429" y="216.8571"/><line style="stroke: #A80036; stroke-width: 3.657142857142857; stroke-dasharray: 5.0,5.0;" x1="135.3143" x2="135.3143" y1="154.6857" y2="837.8286"/><line style="stroke: #A80036; stroke-width: 3.657142857142857; stroke-dasharray: 5.0,5.0;" x1="702.1714" x2="702.1714" y1="154.6857" y2="837.8286"/><line style="stroke: #A80036; stroke-width: 3.657142857142857; stroke-dasharray: 5.0,5.0;" x1="987.4286" x2="987.4286" y1="154.6857" y2="837.8286"/><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="87.7714" x="84.1143" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="36.5714" x="109.7143" y="98.725">R</text><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="87.7714" x="84.1143" y="834.1714"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="36.5714" x="109.7143" y="907.2964">R</text><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="87.7714" x="650.9714" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="36.5714" x="676.5714" y="98.725">B</text><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="87.7714" x="650.9714" y="834.1714"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="36.5714" x="676.5714" y="907.2964">B</text><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="365.7143" x="804.5714" y="10.9714"/><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="365.7143" x="789.9429" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="314.5143" x="815.5429" y="98.725">Other_Peers</text><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="365.7143" x="804.5714" y="834.1714"/><rect fill="#FEFECE" filter="url(#f1fz4tav0apkh1)" height="110.8" style="stroke: #A80036; stroke-width: 5.485714285714286;" width="365.7143" x="789.9429" y="848.8"/><text fill="#000000" font-family="sans-serif" font-size="51.2" lengthAdjust="spacingAndGlyphs" textLength="314.5143" x="815.5429" y="921.925">Other_Peers</text><path d="M47.5429,216.8571 L819.2,216.8571 L819.2,242.4571 L782.6286,279.0286 L47.5429,279.0286 L47.5429,216.8571 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 3.657142857142857;"/><rect fill="none" height="558.8" style="stroke: #000000; stroke-width: 7.314285714285714;" width="1206.8571" x="47.5429" y="216.8571"/><text fill="#000000" font-family="sans-serif" font-size="47.5429" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="607.0857" x="102.4" y="264.6446">For each closest Relay</text><polygon fill="#A80036" points="175.5429,342.1714,138.9714,356.8,175.5429,371.4286,160.9143,356.8" style="stroke: #A80036; stroke-width: 3.657142857142857;"/><line style="stroke: #A80036; stroke-width: 3.657142857142857;" x1="153.6" x2="698.5143" y1="356.8" y2="356.8"/><text fill="#000000" font-family="sans-serif" font-size="47.5429" lengthAdjust="spacingAndGlyphs" textLength="479.0857" x="197.4857" y="338.2732">Establish connection</text><polygon fill="#A80036" points="175.5429,448.7143,138.9714,463.3429,175.5429,477.9714,160.9143,463.3429" style="stroke: #A80036; stroke-width: 3.657142857142857;"/><line style="stroke: #A80036; stroke-width: 3.657142857142857;" x1="153.6" x2="698.5143" y1="463.3429" y2="463.3429"/><text fill="#000000" font-family="sans-serif" font-size="47.5429" lengthAdjust="spacingAndGlyphs" textLength="468.1143" x="197.4857" y="444.8161">Request reservation</text><polygon fill="#A80036" points="658.2857,555.2571,694.8571,569.8857,658.2857,584.5143,672.9143,569.8857" style="stroke: #A80036; stroke-width: 3.657142857142857;"/><line style="stroke: #A80036; stroke-width: 3.657142857142857;" x1="135.3143" x2="680.2286" y1="569.8857" y2="569.8857"/><text fill="#000000" font-family="sans-serif" font-size="47.5429" lengthAdjust="spacingAndGlyphs" textLength="438.8571" x="160.9143" y="551.3589">Accept reservation</text><rect fill="#FBFB77" filter="url(#f1fz4tav0apkh1)" height="138.9714" style="stroke: #A80036; stroke-width: 3.657142857142857;" width="1031.3143" x="186.5143" y="617.4286"/><text fill="#000000" font-family="sans-serif" font-size="47.5429" lengthAdjust="spacingAndGlyphs" textLength="486.4" x="201.1429" y="676.1875">Announce oneself as</text><text fill="#000000" font-family="sans-serif" font-size="47.5429" lengthAdjust="spacingAndGlyphs" textLength="1002.0571" x="201.1429" y="731.5304">/&lt;RELAY_ADDR&gt;/p2p-circuit/&lt;B_PEER_ID&gt;</text><!--MD5=[04f8d3f1a0062390bf711283a567f410]
@startuml
scale 1280 width
participant R
participant B
collections Other_Peers

group For each closest Relay
  B -> R: Establish connection
  B -> R: Request reservation
  R -> B: Accept reservation
  rnote over B: Announce oneself as\n/<RELAY_ADDR>/p2p-circuit/<B_PEER_ID>
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.13+8-post-Debian-1deb11u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>